(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[14],{"3Qy3":function(e,t,i){i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n}));const a=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),n=e=>{switch(!0){case e.includes("Chrome"):return a.CHROME;case e.includes("Safari"):return a.SAFARI;case e.includes("Firefox"):return a.FIREFOX;case e.includes("Opera"):return a.OPERA;case e.includes("IE"):return a.IE;case e.includes("Edge"):return a.EDGE;default:return a.OTHER}}},"51gp":function(e,t,i){i.d(t,"a",(function(){return f}));var a=i("q1tI"),n=i("sEfC"),s=i.n(n),o=i("qrav");var r=i("BEAQ"),l=i("jgRP"),d=i("9pre"),h=i("U4JR"),c=i("n6mq"),u=i("nKUr");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const y=[0,.25,.5,.75,.95,.97],m=[0,.5,.8,1],b={threshold:m},g={rootMargin:"-64px 0px 0px 0px",threshold:d.c},v=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function S(){return(new Date).getTime()}function P(e){return!!e.volume&&e.volume>0}class f extends a.Component{constructor(e){super(e),p(this,"videoWrapperRef",Object(a.createRef)()),p(this,"handleWindowResize",()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),p(this,"handlePlayheadDown",({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),p(this,"handlePlayheadUp",({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),p(this,"handleLoop",()=>{this.videoTime=0}),p(this,"handleTimeChange",e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const a=1e3*e.time,n=function(e,t,i,a){if(e>t)return null;if(i<=0)return null;for(const n of a){const a=n*i;if(e<=a&&t>a)return n}return null}(this.videoTime,a,this.currentInterval.videoDuration,y);if("number"==typeof n&&this.props.playing&&!t&&i){const e=S();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*n),quartilePercentValue:n})}this.videoTime=a,this.props.onTimeChange&&this.props.onTimeChange(e)}),p(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),p(this,"handleReady",e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),p(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),p(this,"handleVisibilityChange",(e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],a=function(e,t){for(let i=0;i<t.length;i+=1){const a=t[i],n=t[i+1];if(null==n)return a;if(a<=e&&e<n)return a}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),m);"number"==typeof a&&(this.visible=a>=.5),null==a||a===this.currentInterval.viewability||this.fullscreen||(0===a?this.startNewInterval({viewability:a,playbackState:v.PAUSED}):this.startNewInterval({viewability:a}))}),p(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),p(this,"handleClose",()=>{this.startNewInterval()}),p(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1};const t=S();this.handleWindowResize=s()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:P(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};P(e)&&!P(this.props)?i.isAudible=!1:!P(e)&&P(this.props)&&(i.isAudible=!0);const a=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==a&&(i.playbackState=a),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?v.PLAYING:v.PAUSED:v.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{contextLogData:i}=this.props,{height:a,width:n,windowHeight:s,windowWidth:o,viewability:r,...l}=t;if(null!=a&&null!=n&&null!=s&&null!=o&&null!=r){const t={...l,height:a,width:n,windowHeight:s,windowWidth:o,viewability:r};Object(h.b)(e,function(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:a,videoStartTime:n,videoEndTime:s,isAudible:o,height:r,width:l,playbackState:d,quartile:h,quartilePercentValue:c,windowHeight:u,windowWidth:p,viewability:y}},...m}=e;return{...m,eventData:{videoEventData:{videoDuration:t,time:i,endTime:a,videoTime:n,endVideoTime:s,isAudible:o,height:r,width:l,playbackState:d,quartile:h,quartilePercentValue:c,windowHeight:u,windowWidth:p,viewability:y}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}}))}}logFourthQuartileEvent(){const e=S();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=S();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:s,aspectRatio:d,captions:h,contextLogData:c,controls:p,cropHeight:y,hlsConfig:m,inAdsDesktopVideoExperiment:v,loop:S,objectFit:P,onLoadedChange:f,onPause:w,onPlay:D,onSeek:k,onVolumeChange:T,playbackRate:E,playing:R,playsInline:L,poster:C,preload:I,rootMargin:V,src:O,surface:M,videoStartTime:A,volume:x}=this.props,{seeking:_}=this.state,F=v?g:b;return void 0!==V&&(F.rootMargin=M?Object(l.a)(M):V),Object(u.jsx)(o.a,{options:F,onVisibilityChange:this.handleVisibilityChange,children:Object(u.jsx)("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,style:y?{display:"flex",alignItems:"center",height:"236px"}:{},children:Object(u.jsx)(r.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:s,aspectRatio:d,captions:h,contextLogData:c,controls:p,hlsConfig:m,loop:S,objectFit:P,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:f,onLoop:this.handleLoop,onPause:w,onPlay:D,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:k,onTimeChange:this.handleTimeChange,onVolumeChange:T,playbackRate:E,playing:!_&&R,playsInline:L,poster:C,preload:I,src:O,videoStartTime:A,visible:this.visible,volume:x})})})}}p(f,"defaultProps",c.jb.defaultProps)},BEAQ:function(e,t,i){i.r(t),i.d(t,"getPlaylistSourceSrc",(function(){return d})),i.d(t,"default",(function(){return h}));var a=i("q1tI"),n=i("PioT"),s=i("TqFJ"),o=i("aFfM"),r=(i("n6mq"),i("nKUr"));function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d=e=>{if(Array.isArray(e)){const t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class h extends a.PureComponent{constructor(e){super(e),l(this,"componentDidUpdate",(e,t)=>{var i;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&null!==(i=this.videoPlayerRef)&&void 0!==i&&i.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),l(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),l(this,"handleOnEnded",({event:e})=>{const{loop:t,onLoop:i,onEnded:a}=this.props;a&&(a({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))});const t=d(e.src);this.state={useHlsVideo:!e.preferMp4&&!n.b.isSafari()&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:h,captions:c,contextLogData:u,controls:p,hlsConfig:y,loop:m,objectFit:b,onDurationChange:g,onEnded:v,onFullscreenChange:S,onLoadedChange:P,onPause:f,onPlay:w,onPlayheadDown:D,onPlayheadUp:k,onReady:T,onSeek:E,onTimeChange:R,onVolumeChange:L,playbackRate:C,playing:I,playsInline:V,poster:O,preferMp4:M,preload:A,src:x,videoStartTime:_,visible:F,volume:j}=this.props,{useHlsVideo:N}=this.state,W=d(x),U={...y,startPosition:_||-1},H=!v&&m;return N&&W?Object(r.jsx)(o.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:h,captions:c,contextLogData:u,controls:p,hlsConfig:U,loop:m,loopOveride:H,onDurationChange:g,onEnded:this.handleOnEnded,onFullscreenChange:S,onLoadedChange:P,onPause:f,onPlay:w,onPlayheadDown:D,onPlayheadUp:k,onReady:T,onSeek:E,onTimeChange:R,onVolumeChange:L,playbackRate:C,playing:I,playsInline:V,poster:O,preload:A,setVideoRef:this.setVideoPlayerRef,src:W,visible:F,volume:j}):Object(r.jsx)(s.a,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:l,aspectRatio:h,captions:c,contextLogData:u,controls:p,loop:m,loopOveride:H,objectFit:b,onDurationChange:g,onEnded:this.handleOnEnded,onFullscreenChange:S,onLoadedChange:P,onPause:f,onPlay:w,onPlayheadDown:D,onPlayheadUp:k,onReady:T,onSeek:E,onTimeChange:R,onVolumeChange:L,playbackRate:C,playing:I,playsInline:V,poster:O,preload:A,setVideoRef:this.setVideoPlayerRef,src:M?x:W||x,videoStartTime:_,visible:F,volume:j})}}},PioT:function(e,t,i){var a=i("+NLT"),n=i("3Qy3");i.d(t,"a",(function(){return n.a}));const s={getBrowser:()=>Object(n.b)(a.a.instance.browser_name||""),isSafari(){return this.getBrowser()===n.a.SAFARI},isChrome(){return this.getBrowser()===n.a.CHROME},isFirefox(){return this.getBrowser()===n.a.FIREFOX},isEdge(){return this.getBrowser()===n.a.EDGE}};t.b=s},TqFJ:function(e,t,i){var a=i("q1tI"),n=i("xkL+"),s=i("U4JR"),o=i("QAzJ"),r=i("pLLR"),l=i("n6mq"),d=i("Lic6"),h=i("Xy1J"),c=i("nKUr");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class p extends a.Component{constructor(...e){var t;super(...e),u(this,"state",{canPlayVideo:!1,playbackState:h.g.DEFAULT}),u(this,"componentDidMount",()=>{const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;Object(d.c)("videoMounted",!1,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.f,{initiator:"mount"}))}),u(this,"componentDidUpdate",e=>{const{playing:t,visible:i}=this.props;e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.logPlaybackPerformance(h.e,{initiator:"update"})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.f,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.f,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}),u(this,"errorRetryCount",2),u(this,"hasSegmentStarted",!1),u(this,"hasPlaybackStarted",!1),u(this,"hasVideoSessionStarted",!1),u(this,"hasVideoSessionEnded",!1),u(this,"lastStartPlayTime",null),u(this,"lastStallTime",null),u(this,"logSessionStartOnNextPlay",!1),u(this,"playerId",""),u(this,"videoRefSetTime",null),u(this,"videoSessionId",""),u(this,"videoVisibleTime",null),u(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numStalls:0,playbackStartTimestamp:null,segments:[],srcString:(t=this.props.src,t?"string"==typeof t?t:Array.isArray(t)&&t[0].src?t[0].src:"unsupported_type_"+typeof t:"undefined"),totalStallDurationMs:0}),u(this,"addSegment",()=>{const{canPlayTime:e,loadStartTime:t,segments:i,srcString:a}=this.playbackPerformance;let n=-1;e&&t&&0===i.length&&(n=e>t?e-t:0);const s=this.videoPlayerRef&&this.videoPlayerRef.video,o={indicatedKbps:-1,duration:s&&s.duration*h.c||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:n,switchBitrateKbps:-1,uri:a,viewportWidth:s&&s.clientWidth||-1,viewportHeight:s&&s.clientHeight||-1,watchedDurationMs:0};i.push(o)}),u(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*h.c:0),u(this,"getVideoResourceTiming",()=>{var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e.performance)&&void 0!==t&&t.getEntriesByName&&this.playbackPerformance.srcString){const e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null}),u(this,"handleCanPlayVideo",e=>{const{contextLogData:t={},onReady:i,playing:a,videoStartTime:n}=this.props,{is_closeup_video:s=!1}=t,{canPlayVideo:o}=this.state;Object(d.c)("handleCanPlayVideo",!1,s,{firstCanPlayEvent:!o,playing:a}),this.playbackPerformance.hasFatalError=!1,o||(this.playbackPerformance.canPlayTime=new Date,null!=n&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=n)),this.setState({canPlayVideo:!0}),i&&i(e)}),u(this,"handleEnded",e=>{const{loop:t,onEnded:i}=this.props,{segments:a}=this.playbackPerformance,n=a&&a[a.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),n&&(n.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(h.e,{initiator:"videoEnded",loop:t}),this.setState({playbackState:h.g.ENDED}),i&&i(e)}),u(this,"handleError",()=>{var e,t,i,a,n,s,o,r;const{contextLogData:l={}}=this.props,{is_closeup_video:c=!1}=l,u=this.videoPlayerRef&&this.videoPlayerRef.video;(null==u||null===(e=u.error)||void 0===e?void 0:e.code)!==h.d.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${(null==u||null===(t=u.error)||void 0===t?void 0:t.message)||""}`,this.playbackPerformance.errorCode=(null==u||null===(i=u.error)||void 0===i?void 0:i.code)||0,this.playbackPerformance.errorName=(null==u||null===(a=u.error)||void 0===a||null===(n=a.message)||void 0===n?void 0:n.slice(0,100))||"unknown",this.playbackPerformance.errorReason=(null==u||null===(s=u.error)||void 0===s||null===(o=s.message)||void 0===o?void 0:o.slice(0,100))||"unknown";const p={errorRecoveryGroup:this.props.errorRecoveryGroup||"null",errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:(null==u?void 0:u.networkState)||"unknown"};if(Object(d.c)("fatalError",!1,c,p),this.props.errorRecoveryGroup.startsWith("enabled"))switch(null==u||null===(r=u.error)||void 0===r?void 0:r.code){case h.d.MEDIA_ERR_ABORTED:break;case h.d.MEDIA_ERR_NETWORK:case h.d.MEDIA_ERR_DECODE:case h.d.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(null==u||u.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:h.g.FAILED})}),u(this,"handleLoadedMetadata",()=>{this.setState({playbackState:h.g.LOADED_METADATA})}),u(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:h.g.LOAD_START})}),u(this,"handleLoadedData",()=>{this.setState({playbackState:h.g.LOADED_DATA})}),u(this,"handlePlaying",()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.setState({playbackState:h.g.PLAYING})}),u(this,"handlePause",()=>{this.state.playbackState!==h.g.STALLING&&this.state.playbackState!==h.g.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.updateStallDuration()),this.setState({playbackState:h.g.PAUSED})}),u(this,"handleSeeking",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==h.g.ENDED&&this.setState({playbackState:h.g.SEEKING})}),u(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==h.g.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numStalls+=1,this.setState({playbackState:h.g.STALLING}))}),u(this,"handleTimeUpdate",e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===h.g.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),u(this,"resetPlaybackMetrics",()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numStalls=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]}),u(this,"setLastSegmentStartPlayTime",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),u(this,"setLastSegmentPlaybackStartDate",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),u(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),u(this,"setVideoPlayerRef",e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handlePause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),u(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),u(this,"updateWatchDurationForCurrentSegment",()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,a=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof a&&"number"==typeof i){const e=a-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),u(this,"logPlaybackPerformance",(e,t)=>{const{contextLogData:i={},userId:a}=this.props,{is_closeup_video:n=!1}=i,{canPlayTime:o,detailedErrors:r,errorCode:l,errorName:c,errorReason:u,hasFatalError:p,loadStartTime:y,numStalls:m,playbackStartTimestamp:b,srcString:g}=this.playbackPerformance,v=this.videoPlayerRef&&this.videoPlayerRef.video,S=e===h.f,P=S&&!this.hasVideoSessionStarted,f=!S&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(v&&(P||f)){var w;let P=-1;o&&y&&(P=o>y?o-y:0);let f=-1;o&&this.videoVisibleTime&&(f=o>this.videoVisibleTime?o-this.videoVisibleTime:0);const D=this.getVideoResourceTiming(),k={averageVideoKbps:-1,detailedErrors:r,downloadedKiloBytes:"number"==typeof(null==D?void 0:D.decodedBodySize)&&D.decodedBodySize/h.b||0,errorCode:l,errorName:c,errorReason:u,fatalError:p,isCellular:!1,nativeVideoDurationMs:v.duration*h.c||-1,numberOfStalls:m,overallWatchedDurationMs:-1,rebufferRate:-1,playbackStartTimestamp:b||-1,segments:[],sessionMark:e,screenPixelScale:null!==(w=window)&&void 0!==w&&w.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:v.clientWidth,startupPlayerHeight:v.clientHeight,startupTimeMs:P,startupLatencyMs:f,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:v.videoWidth,startupVariantHeight:v.videoHeight,videoUrl:g};if(S)this.videoSessionId=Object(h.i)(a),this.playerId=this.playerId||Object(h.h)();else{this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const e=this.playbackPerformance.segments.reduce((e,t)=>e+(t.watchedDurationMs||0),0);k.rebufferRate=this.playbackPerformance.totalStallDurationMs/e,k.overallWatchedDurationMs=e,k.startupVariantWatchedDurationMs=e,k.segments=this.playbackPerformance.segments}Object(d.a)(k,!1,n,{errorRecoveryGroup:this.props.errorRecoveryGroup||"null",playbackState:this.state.playbackState,...t}),Object(s.b)(3606,{...i,is_closeup_video:n,playback_session_id:this.videoSessionId,eventData:{videoPerformanceData:k}}),S?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),Object(d.c)(S?"sessionStart":"sessionEnd",!1,n,{playbackState:this.state.playbackState,...t})}})}componentWillUnmount(){const{loop:e}=this.props;this.logPlaybackPerformance(h.e,{initiator:"unmount",loop:e})}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:s,aspectRatio:o,captions:r,controls:d,loop:h,loopOveride:u,objectFit:p,onDurationChange:y,onFullscreenChange:m,onLoadedChange:b,onPause:g,onPlay:v,onPlayheadDown:S,onPlayheadUp:P,onSeek:f,onVolumeChange:w,playbackRate:D,playing:k,playsInline:T,poster:E,preload:R,src:L,volume:C}=this.props,{canPlayVideo:I}=this.state;return Object(c.jsx)(l.jb,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:a,accessibilityPlayLabel:n,accessibilityUnmuteLabel:s,aspectRatio:o,captions:r,controls:d,loop:void 0===u?h:u,objectFit:p,onDurationChange:y,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:m,onLoadedChange:b,onLoadStart:this.handleLoadStart,onPause:g,onPlay:v,onPlaying:this.handlePlaying,onPlayheadDown:S,onPlayheadUp:P,onReady:this.handleCanPlayVideo,onSeek:f,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:w,onWaiting:this.handleStalled,playbackRate:D,playing:I&&k,playsInline:T,poster:E,preload:R,ref:this.setVideoPlayerRef,src:L,volume:C})}}t.a=Object(a.memo)((function(e){const t=Object(o.a)("web_mp4_error_recovery")().group,{country:i,isAuthenticated:a,isBot:s,isSocialBot:l,unauthId:h,userAgent:u}=Object(r.d)(),{browserName:y,browserVersion:m,isMobile:b}=u,{contextLogData:g={}}=e,{is_closeup_video:v=!1,view:S,viewParameter:P}=g,f=Object(n.b)(),w={browserName:y,browserVersion:m,country:i,isAuthenticated:a,isBot:s,is_closeup_video:v,isMobile:b,isSocialBot:l,view:S,viewParameter:P};return Object(d.b)(w),Object(c.jsx)(p,{...e,userId:f.id||h,errorRecoveryGroup:t})}))},jgRP:function(e,t,i){i.d(t,"a",(function(){return a}));const a=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const a=document.querySelector('[data-test-id="search-tab-bar"]');if(null!==a){const{height:e}=a.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/14-9f2ac8cd0f967d2e5957.mjs.map