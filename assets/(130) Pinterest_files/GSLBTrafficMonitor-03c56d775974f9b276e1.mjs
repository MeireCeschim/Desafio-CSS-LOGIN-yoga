(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["GSLBTrafficMonitor"],{QaG9:function(t,e,r){r.r(e),e.default=function(){if(!window.pinterest_rum_client_config)return;const t=JSON.parse(window.pinterest_rum_client_config.endpoints),e=JSON.parse(window.pinterest_rum_client_config.ids),r=JSON.parse(window.pinterest_rum_client_config.timeouts),n=performance.now();let s=1,o=null;const i={source_type:"js",metrics:[]};for(let a=t.length-1;a>0;a-=1){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}for(const a of t)i.metrics.push({result_version:2,endpoint_id:a.endpoint_id,result:Array(a.attempts)});function c(t){const e=new URL(t.target.src),r=new URLSearchParams(e.search),n=parseInt(r.get("id"),10),s=n%65536,o=Math.round(n/65536)%65536;if(void 0===performance)return;const c=performance.getEntriesByType("resource");if(!(void 0===c||c.length<=0)){for(const t of c)if(void 0!==t.name&&t.name===e.href){i.metrics[s].result[o].dns_start=Math.ceil(t.domainLookupStart),i.metrics[s].result[o].dns_end=Math.ceil(t.domainLookupEnd),i.metrics[s].result[o].tcp_start=Math.ceil(t.connectStart),i.metrics[s].result[o].tls_start=Math.ceil(t.secureConnectionStart),i.metrics[s].result[o].tcp_end=Math.ceil(t.connectEnd),i.metrics[s].result[o].req_start=Math.ceil(t.requestStart),i.metrics[s].result[o].resp_start=Math.ceil(t.responseStart),i.metrics[s].result[o].resp_end=Math.ceil(t.responseEnd);break}switch(t.type){case"load":i.metrics[s].result[o].status_code=200;break;case"error":i.metrics[s].result[o].status_code=500}}}for(let a=0;a<t.length;a+=1){t[a].attempts>s&&(s=t[a].attempts);for(let r=0;r<t[a].attempts;r+=1){i.metrics[a].result[r]={status_code:0,dns_start:0,dns_end:0,tcp_start:0,tls_start:0,tcp_end:0,req_start:0,resp_start:0,resp_end:0};const n=document.createElement("img"),s=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0];n.onerror=c,n.onload=c,n.src=e[t[a].endpoint_id]+"?id="+(65536*r+a)+"&key="+s}}o=setInterval((function(){if(performance.now()-n<r.absolute_timeout)for(const r of i.metrics)for(const t of r.result)if(t&&0===t.status_code)return;clearInterval(o);const t=JSON.stringify(i),e=new XMLHttpRequest;e.open("POST",window.pinterest_rum_client_config.adapter_endpoint),e.withCredentials=!0,e.send(t)}),r.check_interval)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/GSLBTrafficMonitor-03c56d775974f9b276e1.mjs.map